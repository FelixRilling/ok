var Ok=function(){"use strict";const t=(t,i)=>typeof t===i,i=i=>t(i,"undefined"),n=t=>new Map(Object.entries(t)),s=t=>"checkbox"===t.type||"radio"===t.type,a=t=>s(t)?t.checked:t.value,e=()=>!i(HTMLInputElement.prototype.setCustomValidity);return class{constructor(t,i="invalid"){this.map=n(t),this.invalidClass=i}validate(t,...i){if(!t.dataset.ok)throw new Error("no validator assigned");const n=a(t);let s=!0;return t.dataset.ok.split(",").map(t=>t.trim()).forEach(a=>{if(s){if(!this.map.has(a))throw new Error(`missing validator '${a}'`);const o=this.map.get(a);o.fn(n,t,...i)||(s=!1,e()&&t.setCustomValidity(o.msg))}}),s?(e()&&t.setCustomValidity(""),this.invalidClass&&t.classList.remove(this.invalidClass)):this.invalidClass&&t.classList.add(this.invalidClass),s}bind(t,i="input"){t.addEventListener(i,i=>this.validate(t,i))}}}();
//# sourceMappingURL=ok.min.js.map
